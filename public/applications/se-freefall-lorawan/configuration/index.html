<!DOCTYPE html>

<html class="has-navbar-fixed-top">

<head>
  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-11557232-16"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-11557232-16');
  </script>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="generator" content="Hugo 0.70.0" />
  <title>Configuration | Generic Node</title><link rel="canonical" href="https://www.genericnode.com/docs/applications/se-freefall-lorawan/configuration/" />
  <link rel="alternate icon" href="/docs/favicon.ico">
  <link rel="alternate icon" type="image/png" href="/docs/favicon.png">
  <link rel="icon" type="image/png" href="/docs/favicon.png">
  <link rel="stylesheet" href="https://www.genericnode.com/docs/css/theme.min.3f836fedc9c6a2b86da58d8c83e93a00336ad147490c56a3e1c424807e9787c1.css" integrity="sha256-P4Nv7cnGorhtpY2Mg&#43;k6ADNq0UdJDFaj4cQkgH6Xh8E=" crossorigin="anonymous">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta itemprop="name" content="Configuration">
  <meta itemprop="description" content="">
  <meta itemprop="keywords" content="">
  <meta property="og:title" content="Configuration">
  <meta property="og:description" content="">
  <meta property="og:url" content="https://www.genericnode.com/docs/applications/se-freefall-lorawan/configuration/">
  <meta name="twitter:title" content="Configuration" />
  <meta name="twitter:description" content="" />
  <meta name="twitter:card" content="summary" />
</head>


<body>

<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/docs/">
        <img class="logo" src="/docs/img/GN-logo.svg">
        <p class="navbar-item is-size-7"></p>
      </a>
      <span class="navbar-burger burger" data-target="topMenu">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </div>
    <div id="topMenu" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/docs/getting-started/">Getting Started</a>
        <a class="navbar-item" href="/docs/applications/">Applications</a>
        <a class="navbar-item" href="/docs/sensor-edition/">Sensor Edition</a>
        <a class="navbar-item" href="/docs/tracker-edition/">Tracker Edition</a>
      </div>
      <div class="navbar-end">
      </div>
    </div>
  </div>
</nav>


<main>
<section class="section">
  <div class="container">
    <div class="columns">
      
      <div class="column is-one-third">


<h2 class="title is-size-4">Sensor Edition: freefall_lorawan</h2>

<ul class="menu-list">
<a href="https://www.genericnode.com/docs/applications/se-freefall-lorawan/" class="">Overview</a>
<li>
  <a href="https://www.genericnode.com/docs/applications/se-freefall-lorawan/configuration/" class="is-active">Configuration</a>
</li>
<li>
  <a href="https://www.genericnode.com/docs/applications/se-freefall-lorawan/setup/" class="">Setup</a>
</li>
<li>
  <a href="https://www.genericnode.com/docs/applications/se-freefall-lorawan/observation/" class="">Observation</a>
</li>
</ul>





      </div>
      
      <div class="column is-two-thirds">

<h1 class="title is-size-2">Configuration


</h1>

<div class="content">


<h3 id="default">Default</h3>
<ol>
<li>Follow <a href="https://www.thethingsindustries.com/docs/devices/adding-devices/">this</a> guide to add your device to The Things Stack.</li>
<li>Change the <code>APPEUI</code>, <code>DEVEUI</code> and <code>APPKEY</code> in <code>conf/app_conf.h</code> to the values specific to your device, which are used on The Things Stack.</li>
<li>Uncomment the <code>REGION</code> parameters in <code>conf/lorawan_conf.h</code>. These should correspond to the location that you use these devices at.</li>
</ol>
<h3 id="free-fall-detection">Free fall detection</h3>
<ol>
<li>Change <code>ACC_FF_THRESHOLD</code> in <code>app/conf.h</code> to a value you prefer. This will determine the threshold where all axis can be from 0g (which would indicate that it is free falling) to be considered a free fall event.</li>
<li>Change <code>ACC_FF_DURATION</code> in <code>app/conf.h</code> to a value you prefer. This will determine how many times the axis have to meet the threshold values. Note that <code>ACC_FF_ODR</code> in the same file also affects this.</li>
<li><code>ACC_FF_SCALE</code> in <code>app/conf.h</code> could also be changed for situations where more than 2g has to be detected. <code>LIS2DH12.h</code>in the <code>LIS2DH12</code> library lists all the options for this in the full scale section.</li>
<li><code>ACC_FF_ODR</code> in <code>app/conf.h</code> could be lowered to save power, or increased to improve performance. <code>LIS2DH12.h</code> in the <code>LIS2DH12</code>library lists all the options for this in the <code>ODR</code> section.</li>
</ol>
<h3 id="low-power">Low power</h3>
<ol>
<li>Set <code>GNSE_ADVANCED_TRACER_ENALBE</code> to <code>0</code> in <code>conf/app_conf.h</code>. This will make the device consume less power, but also disables UART.</li>
<li>Set <code>DEBUGGER_ON</code> to <code>0</code> in <code>conf/app_conf.h</code>.</li>
<li>Set <code>ACC_FF_ODR</code> in <code>app/conf.h</code> to a lower value if the decreased performance of the free fall detection does not matter for your setup. <code>LIS2DH12.h</code> in the <code>LIS2DH12</code> library lists all the options for this.</li>
</ol>
<p>Additionally, try to remember that:</p>
<ul>
<li>Setting <code>DEBUGGER_ON</code> to <code>1</code> will consume more power. The debugger is ON by default using the macro <code>DEBUGGER_ON</code> in <code>conf/app_conf.h</code>.</li>
<li>Keeping peripherals (such as the sensors) off by controlling the load switches will significantly reduce the power consumption. But, of course, you can not turn the load switch connected to the accelerometer off without disabling the free fall detection as well.</li>
</ul>
<h3 id="lora-extras">LoRa extra&rsquo;s</h3>
<p>Some extra setup configurations can be done to change the behaviour of the LoRaWAN features. These include:</p>
<ol>
<li>Setting the activation method (OTAA or ABP) in <code>LORAWAN_DEFAULT_ACTIVATION_TYPE</code> in <code>lora_app.h</code>. OTAA <a href="https://www.thethingsindustries.com/docs/devices/abp-vs-otaa/">is recommended</a>.</li>
<li>The data rate can be set in <code>lora_app.h</code>. The default configuration uses the ADR. If you want to set your preferred data rate, set <code>LORAWAN_ADR_STATE</code> to <code>LORAMAC_HANDLER_ADR_OFF</code> and set <code>LORAWAN_DEFAULT_DATA_RATE</code> to your preference. A list of the options per region are shown in <code>Region.h</code> in the <code>STM32WLxx_LoRaWAN</code> library.</li>
<li><code>ACC_FF_LORA_PORT</code> can be changed in <code>conf/app_conf.h</code>, which is used to configure the transmission port. The LoRaWAN keys mentioned in the default section can be altered here as well.</li>
<li>Also in <code>conf/app_conf.h</code>, the downlink port can be set by altering <code>ACC_FF_DOWNLINK_PORT</code>.</li>
</ol>
<h3 id="debugger">Debugger</h3>
<p>For debugging, the firmware has to support it first. The debugger is set in the macro <code>DEBUGGER_ON</code> in <code>conf/app_conf.h</code>.</p>

</div>


<div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/applications/se-freefall-lorawan/">← Sensor Edition: freefall_lorawan</a>
<a class="button is-pulled-right" href="/docs/applications/se-freefall-lorawan/setup/">Setup →</a>
</div>


      </div>
    </div>
  </div>
</section>
</main>

<footer class="footer background-footer">
  <div class="container">
    <div class="columns">
      <nav class="column is-one-quarter">
        <h3 class="title is-6">The Things Stack</h3>
        <p><a class="" href="/docs/getting-started/">Getting Started</a></p>
        <p><a class="" href="/docs/applications/">Applications</a></p>
        <p><a class="" href="/docs/sensor-edition/">Sensor Edition</a></p>
        <p><a class="" href="/docs/tracker-edition/">Tracker Edition</a></p>
      </nav>
      <nav class="column is-one-quarter">
        <h3 class="title is-6">Contributing</h3>
        <p><a class="" href="https://github.com/TheThingsIndustries/generic-node-se">GitHub</a></p>
        <p><a class="" href="https://www.thethingsnetwork.org/forum/c/nodes/generic-node">Forum</a></p>
      </nav>
      
      <nav class="column is-one-quarter">
        <h3 class="title is-6">About Us</h3>
        <p><a class="" href="https://www.thethingsnetwork.org">The Things Network</a></p>
        <p><a class="" href="https://www.thethingsindustries.com">The Things Industries</a></p>
      </nav>
      </div>
  </div>
</footer>
<script src="https://www.genericnode.com/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.genericnode.com/docs/js/theme.min.6705961acdc7b360c900fe309485c5994ae9a75c5507bc88dbd1507420c40ae7.js" integrity="sha256-ZwWWGs3Hs2DJAP4wlIXFmUrpp1xVB7yI29FQdCDECuc=" crossorigin="anonymous"></script>

</body>

</html>
